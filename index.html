<!--
	大陸の遥か北の果て。
	この世界の人々が天国と呼ぶ場所
	「魂の眠る地」にたどり着いた。
	そこは多くの魂が集まる場所で、
	私はかつての戦友達と対話した。

				ー大魔法使いフランメー
-->

<!DOCTYPE HTML>
<html lang="zh">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>sumiyo.link</title>
	<link rel="shortcut icon" href="src/icon.png?ver=7" />

	<link rel="stylesheet" type="text/css" href="style.css" />
	<link rel="preload" as="font" href="src/Poppins Regular.woff2" crossorigin="anonymous" />
	<link rel="stylesheet" type="text/css" href="css/player.css"  />

</head>



<body style="pointer-events: none;" >
<script>
	// 定义核心变量
	const env = {
		'data': {
			'version': {},
			'list': {},
			'visitors': 0,
			'domain': 'sumiyo.link',
			'isNew': null,
			'isLoad': 0,
			'isNetwork': (document.domain ? true :false),
			'isMobile': (window.innerWidth < 900 ? true :false),
		},
		'tmp': {
			't1': new Date(),
		},
		'f': {},
		'timer': {}
	}

	env.timer.t1 = setInterval(() => {
		if (!document.hidden && env.data.isLoad) {
			setTimeout(function (){
				if (typeof env.tmp.t4 != 'undefined') {
					env.f.msg('Hello 🎉', 3000)
					env.tmp.t4 = null
					delete env.tmp.t4
				}
			},1500)
			setTimeout(function (){
				env.f.type()
				player.f.loadPlayer()
			},500)

			document.querySelector('.box-1 header').removeAttribute('style')
			document.querySelector('.box-2 span').removeAttribute('style')
			document.querySelector('.avatar').removeAttribute('style')
			document.body.removeAttribute('style')

			clearInterval(env.timer.t1)
		}
	},500)

	// 仅允许直接访问此页
	if (env.data.isNetwork && (window.location.href != ('https://' + env.data.domain + '/')) && !window.location.href.includes('https://' + env.data.domain + '/blog')) {
		document.querySelector('body').style.display = 'none'
		window.location.href = 'https://' + env.data.domain + '/'
	}

</script>



<!-- 主页 -->

<div class="box-1" >
	<header style="opacity: 0;" >
		<a onclick="env.f.blog.open('page/square')" >Square</a>|<a onclick="env.f.blog.open('page/about')" >About</a>
		<btn1 onclick="env.f.menu.open()" ></btn1>
		<btn2 onclick="env.f.menu.close()" style="display: none;" ></btn2>
	</header>

	<div class="box-2" >
		<span style="opacity: 0;" >sumiyo</span>
		<type></type>
	</div>

	<!-- 大胆的设计，让我们摆脱了头像框的传统限制 -->
	<img class="avatar" src="src/sumiyo.webp" style="transform: scale(1.02); opacity: 0;" onload="env.data.isLoad = true" />

	<!-- 博客框架 -->
	<div class="blog" style="display: none;" >
		<btn1 onclick="env.f.blog.close()" ></btn1>
	</div>
</div>



<!-- 菜单  -->

<div class="menu" >
	<h1>MENU.</h1>
	<hr />

	<!-- 博客 -->
	<div style="margin-top: 10px;" >
		<btn onclick="env.f.menu.c1()" >
			<div class="btn-active" id="menu-c1" ></div>检索:<span class="search-title" ><span id="_1" >0</span> items</span>
		</btn>
		<div class="menu-c1" >
			<div class="search" >
				<textarea type="text" oninput="this.value = this.value.replace(/\n/g, '')" onfocus="this.select();" maxlength="16" autocomplete="off" ></textarea><span></span>
				<list><div style="display: none;" class="null" >没有找到指定内容...</div></list>
			</div>
		</div>
	</div>

	<!-- 通知 -->
	<div>
		<btn onclick="env.f.menu.c2()" >
			<div class="btn-active" id="menu-c2" ></div>通知
		</btn>
		<div class="menu-c2" ></div>
	</div>

	<hr style="margin-top: 80px;" />

	<!-- 联系 -->
	<div style="margin-top: 10px;" >
		<btn onclick="env.f.menu.c3()" >
			<div class="btn-active" id="menu-c3" ></div>联系
		</btn>
		<div class="menu-c3" >
			<a href="mailto:me@sumiyo.link" target="_blank" >me@sumiyo.link<span></span></a>
		</div>
	</div>

	<!-- 协议 -->
	<div class="menu-footer" >
		<a onclick="env.f.blog.open('page/policy')" >「 Privacy & Copyright 」</a>
	</div>
</div>



<!-- 播放器  -->

<div class="player" >
	<audio preload="none" ></audio>
	<div class="player-menu" style="display: none" >
		<div class="player-header" >
			<a onclick="player.f.lrc.gui()" >歌词</a> | <a onclick="player.f.reset()" >重置</a>
			<div class="player-header-right" >
				<span class="player-sound0" ></span><span class="player-sound1" title="音量" ><div></div></span>
				<a onclick="player.f.mode()" title="列表循环" ></a>
			</div>
		</div>
		<div class="player-list" ><div></div></div>
	</div>
	<div class="player-ask" style="display: none;" >
		这篇文章附有 1 首音乐，<br />想要听听吗？<br />
		<span><a>加载</a> | <a onclick="player.f.add.ask(0)" >取消</a></span>
	</div>
	<div class="player-ui" >
		<div class="player-btn player-btn0" onclick="player.f.play()" ></div>
		<div class="player-name" ></div>
		<div class="player-bar0" ><div class="player-bar1" ><div></div></div></div>
	</div>
	<div class="player-cover" onclick="player.f.menu();" ><img onload="player.f.loadPlayer()" /></div>
	<a onclick="player.f.show()" class="player-mobile0 f-3" ></a>
	<a onclick="player.f.show()" class="player-mobile1 f-3" ></a>

</div>
<div class="player-lrc" style="display: none;" >
	<img onload="env.f.fade(player.e.lrcI, 500)" />
	<cover></cover>

	<!-- 这个 headerSide 模仿了 frieren-anime.jp/ 的设计 -->
	<div class="player-title" ><span></span></div>
	<list></list>
	<header>
		<btn1 onclick="player.f.lrc.gui()" ></btn1>
		<div class="player-btn player-btn0" onclick="player.f.play()" ></div>
		<div class="player-kana" onclick="player.f.kana()" style="display: none;" >あ</div>
	</header>
</div>



<!-- 页脚 -->

<footer>
	<div class="f-2" >
		<!-- 简短但真挚的感谢 -->
		项目支持: <a onclick="window.open('https://www.cloudflare.com/')" target="_blank" style="cursor: help;" >Cloudflare</a>
	</div>
	<div style="opacity: 0;">
		<!-- 小小的成就 -->
		<span style="user-select: none;"> | </span><span id="_3">0</span> 天 & <span id="_2">0</span> 访客
	</div>
</footer>



<!-- 弹窗 -->

<div class="message" ><div></div></div>
<div class="loading" style="display: none;" >
	<box1><div>ロード中ですよ...</div></box1>
	<box2></box2>
</div>






<!-- Javascript -->
	<script src="blog\staticDB.js" ></script>
	<script src="script.js" ></script>
	<script src="js\player.js"></script>

	<script>
		// 检查页面加载情况
		setTimeout(function (){
			if (!env.tmp.t2) {
				document.querySelector('.message').children[0].innerHTML = '页面加载失败　<a onclick="location.reload();" href="javascript:;" style="color: rgba(var(--t-b1), 0.8);" ><ins>刷新</ins></a> / <a onclick="env.data.isLoad = 1" href="javascript:;" style="color: rgba(var(--t-b1), 0.8);" ><ins>强制加载</ins></a>'
				document.querySelector('.message').classList.add('message-active')
			}
			env.tmp.t2 = null
			delete env.tmp.t2
		}, 30000)
	</script>
</body>


</html>